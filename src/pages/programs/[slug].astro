---
import Layout from "../../layouts/Layout.astro";
import { loadQuery } from "../../sanity/lib/load-query";
import PortableText from "../../components/Sanity/PortableText.astro";

const { params } = Astro;

const { data: post } = await loadQuery({
  query: `*[_type == "post" && slug.current == $slug]{ _id, "thumbnail":mainImage.asset->url, title, body, description, publishedAt, _updatedAt}[0]`,
  params,
});

---

<Layout title="Welcome to Walls and Gates Academy">
  <div class="jumbotron">
    <img src='https://cdn.sanity.io/images/oasqxun4/production/ad6b2eb64ef56f15d9a7d957edf972a42cf5a558-5760x3840.jpg?auto=format&bg=000&h=1080&w=1980' alt={'Image for ' + post.title + 'Walls and Gates Academy'}>
  </div>

  <div class="article">
    <h1 class="title" >{post.title}</h1>
    <p class="subtitle">{post.description}</p>
    <div class="body">
      <PortableText portableText={post.body} />
    </div>
    <div class="end">
      <p>Created At: <span>{post.publishedAt}</span></p>
      <p>Last Updated: <span>{post._updatedAt}</span></p>
    </div>
  </div>
</Layout>

<style>
.jumbotron img {
  width: 100%;
  max-height: 500px;
}

.article {
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: justify;
  max-width: 80%;
  margin: auto;
  padding: 2rem;
  gap: 1rem;
}

.article .title {
  font-size: 2.1428571em;
  line-height: 1.8;
  font-weight: 600;
  margin: 0.5rem 0;
}

.article .body {
  p {
    font-size: 1.1rem;
    margin: 1.5rem 0;
  }

  a {
    color: black;
    transition: color 0.2s ease-in;
  }

  code {
    background-color: gray;
    border-radius: 3px;
    padding: 4px 6px;
  }

  pre {
    font-size: .99rem;
    font-weight: 400;
    color: #35495e;
    letter-spacing: 0;
    padding: 10px;
    border: 1px solid #dbdfe1;
    border-radius: 4px;
    background-color: #fcfcfc;
  }

  pre, code, samp {
    font-family: 'Roboto Mono';
  }

  ul {
    padding: 2rem;

    li {
      font-size: 1rem;
    }
  }

  ol {
    padding: 2rem;

    li {
      font-size: 1rem;
    }
  }

  img {
    width: 100%;
    max-height: 900px;
    border-radius: 4px;
  }
}

.article .end {
  display: flex;
  justify-content: space-between;

  font-size: 14px;
  color: black
}

.article .end span {
  font-style: italic;
  font-size: 12px;
}
</style>